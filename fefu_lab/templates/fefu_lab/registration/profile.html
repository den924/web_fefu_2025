<!-- fefu_lab/templates/fefu_lab/registration/profile.html -->
{% extends "fefu_lab/base.html" %}

{% block title %}–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç{% endblock %}
{% block heading %}–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç{% endblock %}

{% block content %}
<div class="container">
    {% if messages %}
        {% for message in messages %}
            <div class="alert alert-{{ message.tags }}" 
                 style="padding: 15px; margin-bottom: 20px; border-radius: 5px;
                        {% if message.tags == 'success' %}background: #d4edda; color: #155724; border: 1px solid #c3e6cb;
                        {% elif message.tags == 'error' %}background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb;
                        {% else %}background: #e7f3ff; color: #004085; border: 1px solid #b8daff;{% endif %}">
                {{ message }}
            </div>
        {% endfor %}
    {% endif %}
    
    <div class="profile-header" style="display: flex; align-items: center; gap: 30px; margin-bottom: 40px; padding: 30px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 15px; color: white;">
        <div style="flex-shrink: 0;">
            <div style="width: 120px; height: 120px; background: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 50px; color: #667eea; box-shadow: 0 5px 15px rgba(0,0,0,0.2);">
                {% if student_profile and student_profile.avatar %}
                    <img src="{{ student_profile.avatar.url }}" alt="–ê–≤–∞—Ç–∞—Ä" style="width: 100%; height: 100%; border-radius: 50%; object-fit: cover;">
                {% else %}
                    {{ user.first_name|first|upper }}{{ user.last_name|first|upper }}
                {% endif %}
            </div>
        </div>
        
        <div style="flex-grow: 1;">
            <h1 style="color: white; margin: 0 0 10px 0;">
                {% if user.get_full_name %}
                    {{ user.get_full_name }}
                {% else %}
                    {{ user.username }}
                {% endif %}
            </h1>
            
            <div style="display: flex; gap: 15px; margin-bottom: 15px;">
                <span style="background: rgba(255,255,255,0.2); padding: 5px 15px; border-radius: 20px; font-size: 14px;">
                    {{ user.email }}
                </span>
                
                {% if student_profile %}
                    <span style="background: rgba(255,255,255,0.2); padding: 5px 15px; border-radius: 20px; font-size: 14px;">
                        {{ student_profile.get_role_display_name }}
                    </span>
                    
                    {% if student_profile.faculty %}
                    <span style="background: rgba(255,255,255,0.2); padding: 5px 15px; border-radius: 20px; font-size: 14px;">
                        {{ student_profile.get_faculty_display_name }}
                    </span>
                    {% endif %}
                {% endif %}
            </div>
            
            <p style="opacity: 0.9; margin: 0;">
                –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç!
            </p>
        </div>
    </div>
    
    <!-- –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è -->
    <div class="dashboard-cards" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 25px; margin-bottom: 40px;">
        {% if is_student %}
        <div class="card" style="padding: 25px; border-radius: 10px; background: white; box-shadow: 0 5px 15px rgba(0,0,0,0.1);">
            <h3 style="color: #667eea; margin-top: 0;">üë®üéì –°—Ç—É–¥–µ–Ω—Ç</h3>
            <p>–î–æ—Å—Ç—É–ø –∫ —Ñ—É–Ω–∫—Ü–∏—è–º –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç–æ–≤:</p>
            <ul style="padding-left: 20px;">
                <li>–ü—Ä–æ—Å–º–æ—Ç—Ä –∑–∞–ø–∏—Å–∞–Ω–Ω—ã—Ö –∫—É—Ä—Å–æ–≤</li>
                <li>–ó–∞–ø–∏—Å—å –Ω–∞ –Ω–æ–≤—ã–µ –∫—É—Ä—Å—ã</li>
                <li>–ü—Ä–æ—Å–º–æ—Ç—Ä –æ—Ü–µ–Ω–æ–∫</li>
                <li>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è</li>
            </ul>
            <div style="margin-top: 20px;">
                <a href="{% url 'student_dashboard' %}" class="btn" style="display: inline-block; padding: 10px 20px; background: #667eea; color: white; text-decoration: none; border-radius: 5px;">
                    –ü–µ—Ä–µ–π—Ç–∏ –≤ –∫–∞–±–∏–Ω–µ—Ç —Å—Ç—É–¥–µ–Ω—Ç–∞
                </a>
            </div>
        </div>
        {% endif %}
        
        {% if is_teacher %}
        <div class="card" style="padding: 25px; border-radius: 10px; background: white; box-shadow: 0 5px 15px rgba(0,0,0,0.1);">
            <h3 style="color: #4CAF50; margin-top: 0;">üë®üè´ –ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å</h3>
            <p>–î–æ—Å—Ç—É–ø –∫ —Ñ—É–Ω–∫—Ü–∏—è–º –¥–ª—è –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π:</p>
            <ul style="padding-left: 20px;">
                <li>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–≤–æ–∏–º–∏ –∫—É—Ä—Å–∞–º–∏</li>
                <li>–ü—Ä–æ—Å–º–æ—Ç—Ä —Å–ø–∏—Å–∫–∞ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤</li>
                <li>–í—ã—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –æ—Ü–µ–Ω–æ–∫</li>
                <li>–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö –∫—É—Ä—Å–æ–≤</li>
            </ul>
            <div style="margin-top: 20px;">
                <a href="{% url 'teacher_dashboard' %}" class="btn" style="display: inline-block; padding: 10px 20px; background: #4CAF50; color: white; text-decoration: none; border-radius: 5px;">
                    –ü–µ—Ä–µ–π—Ç–∏ –≤ –∫–∞–±–∏–Ω–µ—Ç –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è
                </a>
            </div>
        </div>
        {% endif %}
        
        {% if is_admin %}
        <div class="card" style="padding: 25px; border-radius: 10px; background: white; box-shadow: 0 5px 15px rgba(0,0,0,0.1);">
            <h3 style="color: #f44336; margin-top: 0;">üëë –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä</h3>
            <p>–î–æ—Å—Ç—É–ø –∫ —Ñ—É–Ω–∫—Ü–∏—è–º –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤:</p>
            <ul style="padding-left: 20px;">
                <li>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏</li>
                <li>–ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏</li>
                <li>–î–æ—Å—Ç—É–ø –∫ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ Django</li>
                <li>–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–∏—Å—Ç–µ–º—ã</li>
            </ul>
            <div style="margin-top: 20px;">
                <a href="{% url 'admin_dashboard' %}" class="btn" style="display: inline-block; padding: 10px 20px; background: #f44336; color: white; text-decoration: none; border-radius: 5px;">
                    –ü–µ—Ä–µ–π—Ç–∏ –≤ –ø–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
                </a>
                <a href="/admin/" class="btn" style="display: inline-block; padding: 10px 20px; background: #9C27B0; color: white; text-decoration: none; border-radius: 5px; margin-left: 10px;">
                    –ê–¥–º–∏–Ω–∫–∞ Django
                </a>
            </div>
        </div>
        {% endif %}
    </div>
    
    <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ—Ñ–∏–ª–µ -->
    <div class="profile-info" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-bottom: 40px;">
        <div class="info-card" style="padding: 20px; background: white; border-radius: 10px; box-shadow: 0 3px 10px rgba(0,0,0,0.1);">
            <h4 style="color: #667eea; margin-top: 0;">üìß –ö–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h4>
            <p><strong>Email:</strong> {{ user.email }}</p>
            <p><strong>–ò–º—è:</strong> {{ user.first_name }}</p>
            <p><strong>–§–∞–º–∏–ª–∏—è:</strong> {{ user.last_name }}</p>
            {% if student_profile and student_profile.phone %}
                <p><strong>–¢–µ–ª–µ—Ñ–æ–Ω:</strong> {{ student_profile.phone }}</p>
            {% endif %}
        </div>
        
        {% if student_profile %}
        <div class="info-card" style="padding: 20px; background: white; border-radius: 10px; box-shadow: 0 3px 10px rgba(0,0,0,0.1);">
            <h4 style="color: #4CAF50; margin-top: 0;">üéì –ê–∫–∞–¥–µ–º–∏—á–µ—Å–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h4>
            <p><strong>–†–æ–ª—å:</strong> {{ student_profile.get_role_display_name }}</p>
            <p><strong>–§–∞–∫—É–ª—å—Ç–µ—Ç:</strong> {{ student_profile.get_faculty_display_name }}</p>
            <p><strong>–ö—É—Ä—Å:</strong> {{ student_profile.year }}</p>
            <p><strong>–°—Ä–µ–¥–Ω–∏–π –±–∞–ª–ª:</strong> {{ student_profile.gpa }}</p>
        </div>
        {% endif %}
        
        <div class="info-card" style="padding: 20px; background: white; border-radius: 10px; box-shadow: 0 3px 10px rgba(0,0,0,0.1);">
            <h4 style="color: #FF9800; margin-top: 0;">‚öôÔ∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–æ–º</h4>
            <p><strong>–î–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:</strong> {{ user.date_joined|date:"d.m.Y" }}</p>
            <p><strong>–ü–æ—Å–ª–µ–¥–Ω–∏–π –≤—Ö–æ–¥:</strong> {{ user.last_login|date:"d.m.Y H:i"|default:"-" }}</p>
            <p><strong>–°—Ç–∞—Ç—É—Å:</strong> {% if user.is_active %}–ê–∫—Ç–∏–≤–µ–Ω{% else %}–ù–µ–∞–∫—Ç–∏–≤–µ–Ω{% endif %}</p>
        </div>
    </div>
    
    <!-- –î–µ–π—Å—Ç–≤–∏—è -->
    <div style="text-align: center; padding: 30px; background: #f8f9fa; border-radius: 10px;">
        <h3>–î–µ–π—Å—Ç–≤–∏—è</h3>
        <div style="display: flex; gap: 15px; justify-content: center; flex-wrap: wrap; margin-top: 20px;">
            <a href="{% url 'profile_edit' %}" class="btn" style="display: inline-block; padding: 12px 25px; background: #2196F3; color: white; text-decoration: none; border-radius: 5px;">
                ‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å
            </a>
            
            <a href="{% url 'logout' %}" class="btn" style="display: inline-block; padding: 12px 25px; background: #f44336; color: white; text-decoration: none; border-radius: 5px;">
                üö™ –í—ã–π—Ç–∏ –∏–∑ —Å–∏—Å—Ç–µ–º—ã
            </a>
            
            <a href="{% url 'home' %}" class="btn" style="display: inline-block; padding: 12px 25px; background: #9C27B0; color: white; text-decoration: none; border-radius: 5px;">
                üè† –ù–∞ –≥–ª–∞–≤–Ω—É—é
            </a>
        </div>
    </div>
</div>
{% endblock %}
