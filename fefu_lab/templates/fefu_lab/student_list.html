{% extends 'fefu_lab/base.html' %}

{% block title %}–°–ø–∏—Å–æ–∫ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ | FEFU Lab{% endblock %}

{% block extra_css %}
<style>
    .filter-buttons {
        display: flex;
        gap: 10px;
        margin: 20px 0;
        flex-wrap: wrap;
    }
    
    .filter-btn {
        padding: 8px 20px;
        border: 2px solid #667eea;
        background: white;
        color: #667eea;
        border-radius: 20px;
        text-decoration: none;
        font-weight: 500;
        transition: all 0.3s;
    }
    
    .filter-btn:hover, .filter-btn.active {
        background: #667eea;
        color: white;
    }
    
    .students-table {
        width: 100%;
        border-collapse: collapse;
        margin: 20px 0;
        background: white;
        border-radius: 10px;
        overflow: hidden;
        box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    }
    
    .students-table th {
        background: #667eea;
        color: white;
        padding: 15px;
        text-align: left;
        font-weight: 600;
    }
    
    .students-table td {
        padding: 15px;
        border-bottom: 1px solid #eee;
    }
    
    .students-table tr:hover {
        background: #f8f9fa;
    }
    
    .student-link {
        color: #667eea;
        text-decoration: none;
        font-weight: 500;
    }
    
    .student-link:hover {
        text-decoration: underline;
    }
    
    .faculty-badge {
        display: inline-block;
        padding: 4px 12px;
        border-radius: 12px;
        font-size: 12px;
        font-weight: 500;
    }
    
    .stats-card {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 20px;
        border-radius: 15px;
        margin-bottom: 30px;
    }
</style>
{% endblock %}

{% block content %}
    <h1>üë®‚Äçüéì –°–ø–∏—Å–æ–∫ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤</h1>
    
    <div class="stats-card">
        <h2 style="color: white;">–í—Å–µ–≥–æ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤: {{ total_students }}</h2>
        <p>–ê–∫—Ç–∏–≤–Ω—ã–µ —Å—Ç—É–¥–µ–Ω—Ç—ã –î–í–§–£</p>
    </div>
    
    <div class="filter-buttons">
        <a href="{% url 'student_list' %}" class="filter-btn {% if not faculty_filter %}active{% endif %}">
            –í—Å–µ —Ñ–∞–∫—É–ª—å—Ç–µ—Ç—ã
        </a>
        <a href="{% url 'student_list' %}?faculty=CS" class="filter-btn {% if faculty_filter == 'CS' %}active{% endif %}">
            –ö–∏–±–µ—Ä–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
        </a>
        <a href="{% url 'student_list' %}?faculty=SE" class="filter-btn {% if faculty_filter == 'SE' %}active{% endif %}">
            –ü—Ä–æ–≥—Ä–∞–º–º–Ω–∞—è –∏–Ω–∂–µ–Ω–µ—Ä–∏—è
        </a>
        <a href="{% url 'student_list' %}?faculty=IT" class="filter-btn {% if faculty_filter == 'IT' %}active{% endif %}">
            –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏
        </a>
        <a href="{% url 'student_list' %}?faculty=DS" class="filter-btn {% if faculty_filter == 'DS' %}active{% endif %}">
            –ù–∞—É–∫–∞ –æ –¥–∞–Ω–Ω—ã—Ö
        </a>
        <a href="{% url 'student_list' %}?faculty=WEB" class="filter-btn {% if faculty_filter == 'WEB' %}active{% endif %}">
            –í–µ–±-—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏
        </a>
    </div>
    
    {% if students %}
    <table class="students-table">
        <thead>
            <tr>
                <th>–§–ò–û</th>
                <th>Email</th>
                <th>–§–∞–∫—É–ª—å—Ç–µ—Ç</th>
                <th>–ö—É—Ä—Å</th>
                <th>–°—Ä–µ–¥–Ω–∏–π –±–∞–ª–ª</th>
                <th>–î–µ–π—Å—Ç–≤–∏—è</th>
            </tr>
        </thead>
        <tbody>
            {% for student in students %}
            <tr>
                <td>
                    <strong>{{ student.last_name }} {{ student.first_name }}</strong>
                </td>
                <td>{{ student.email }}</td>
                <td>
                    <span class="faculty-badge" style="background: {% cycle '#e3f2fd' '#f3e5f5' '#e8f5e8' '#fff3e0' '#fce4ec' %}; color: {% cycle '#1565c0' '#7b1fa2' '#2e7d32' '#ef6c00' '#c2185b' %};">
                        {{ student.get_faculty_display_name }}
                    </span>
                </td>
                <td>{{ student.year }} –∫—É—Ä—Å</td>
                <td>
                    <span style="font-weight: bold; color: {% if student.gpa >= 4.5 %}#4caf50{% elif student.gpa >= 3.5 %}#ff9800{% else %}#f44336{% endif %};">
                        {{ student.gpa }}
                    </span>
                </td>
                <td>
                    <a href="{% url 'student_profile' student_id=student.pk %}" class="student-link">
                        üëÅÔ∏è –ü—Ä–æ—Å–º–æ—Ç—Ä
                    </a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    
    <div style="margin-top: 30px; text-align: center;">
        <a href="{% url 'home' %}" class="btn">üè† –ù–∞ –≥–ª–∞–≤–Ω—É—é</a>
        <a href="{% url 'enrollment_create' %}" class="btn" style="background: #4caf50;">üìù –ó–∞–ø–∏—Å—å –Ω–∞ –∫—É—Ä—Å</a>
    </div>
    
    {% else %}
    <div class="card" style="text-align: center; padding: 40px;">
        <h3>üòï –°—Ç—É–¥–µ–Ω—Ç—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</h3>
        <p>–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –≤—ã–±—Ä–∞—Ç—å –¥—Ä—É–≥–æ–π —Ñ–∞–∫—É–ª—å—Ç–µ—Ç –∏–ª–∏ –¥–æ–±–∞–≤—å—Ç–µ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å.</p>
        <a href="{% url 'home' %}" class="btn">üè† –ù–∞ –≥–ª–∞–≤–Ω—É—é</a>
    </div>
    {% endif %}
{% endblock %}
