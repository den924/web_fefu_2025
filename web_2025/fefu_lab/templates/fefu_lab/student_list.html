{% extends "fefu_lab/base.html" %}

{% block content %}
<div class="container">
    <h1>Список студентов</h1>
    
    {% if user.is_authenticated and user.student_profile.role == 'ADMIN' %}
        <a href="{% url 'register' %}" class="btn">Добавить студента</a>
    {% endif %}
    
    {% if students %}
        <div class="students-grid">
            {% for student in students %}
                <div class="student-card">
                    <div class="student-header">
                        {% if student.avatar %}
                            <img src="{{ student.avatar.url }}" alt="Аватар" class="student-avatar">
                        {% else %}
                            <div class="student-avatar-placeholder">
                                {{ student.first_name|first }}{{ student.last_name|first }}
                            </div>
                        {% endif %}
                        <h3>{{ student.first_name }} {{ student.last_name }}</h3>
                    </div>
                    <p><strong>Email:</strong> {{ student.email }}</p>
                    <p><strong>Факультет:</strong> {{ student.get_faculty_display }}</p>
                    <p><strong>Роль:</strong> {{ student.get_role_display }}</p>
                    <p><strong>Дата регистрации:</strong> {{ student.created_at|date:"d.m.Y" }}</p>
                    <a href="{% url 'student_detail' student.pk %}" class="btn">Подробнее</a>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <p>Пока нет зарегистрированных студентов.</p>
    {% endif %}
</div>
{% endblock %}
